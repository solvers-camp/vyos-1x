### Autogenerated by service_console-server.py ###

# See https://www.conserver.com/docs/conserver.cf.man.html for additional options

config * {
    primaryport 3109;
    daemonmode false;
}

default * {
    motd "VyOS Console Server";
    rw *;
}

##
## list of consoles we serve
##
{% for key, value in device.items() %}
{#   Depending on our USB serial console we could require a path adjustment #}
{%     set path = '/dev' if key.startswith('ttyS') else '/dev/serial/by-bus' %}
console {{ key }} {
    master localhost;
    type device;
    device {{ path }}/{{ key }};
    baud {{ value.speed }};
    parity {{ value.parity }};
    options {{ "!" if value.stop_bits == "1" }}cstopb;
{%     if value.alias is vyos_defined %}
    aliases "{{ value.alias }}";
{%     endif %}
}
{% endfor %}

##
## list of clients we allow
##
access * {
    trusted localhost;
    allowed localhost;
}
